id: settingsForm
dataSourceRef: meta
layout:
  kind: grid
  labels:
    mode: left
    width: 200px
    controlGap: 12
  columns: 3
  rowGap: 10
  columnGap: 24
items:
  # Row 1 — Agent, Model, Tool Exposure
  - id: agent
    label: Agent
    type: select
    columnSpan: 1
    on:
      - event: onSelection
        handler: chat.selectAgent
      - event: onChange
        handler: chat.selectAgent
      - event: onItemSelect
        handler: chat.selectAgent

  - id: model
    label: Model
    type: select
    columnSpan: 1
    on:
      - event: onSelection
        handler: chat.selectModel
      - event: onChange
        handler: chat.selectModel
      - event: onItemSelect
        handler: chat.selectModel


  - id: toolCallExposure
    label: Tool Exposure
    type: radio
    columnSpan: 1
    options:
      - { value: turn, label: Per Turn }
      - { value: conversation, label: Whole Conversation }
    properties:
      style:
        marginTop: '0'
        marginBottom: '0'

  # Row 1c — Reasoning effort override (optional)
  - id: reasoningEffort
    label: Reasoning Effort
    type: select
    columnSpan: 1
    options:
      - { value: '', label: inherit default }
      - { value: low, label: Low }
      - { value: medium, label: Medium }
      - { value: high, label: High }
    properties:
      placeholder: 'inherit default'
      style:
        width: '220px'

  # Row 1d — Conversation visibility
  - id: visibility
    label: Conversation Visibility
    type: radio
    columnSpan: 1
    options:
      - { value: private, label: Private }
      - { value: public, label: Public }
    on:
      - event: onSelection
        handler: chat.updateVisibility
      - event: onChange
        handler: chat.updateVisibility
      - event: onItemSelect
        handler: chat.updateVisibility
    properties:
      style:
        marginTop: '0'
        marginBottom: '0'

  # Section label
  - id: _label_agent_prefs
    type: label
    value: Agent Preferences
    columnSpan: 3
    properties:
      style:
        fontWeight: 600
        marginTop: '4px'
        marginBottom: '2px'

  # Row 2 — View toggles + Auto Summarize
  - id: showExecutionDetails
    label: Show Execution
    type: toggle
    columnSpan: 1
    properties:
      style:
        marginTop: '6px'
        marginBottom: '0'

  - id: showToolFeed
    label: Show Tool Feed
    type: toggle
    columnSpan: 1
    properties:
      style:
        marginTop: '6px'
        marginBottom: '0'

  - id: autoSummarize
    label: Auto Summarize
    type: toggle
    columnSpan: 1
    properties:
      style:
        marginTop: '6px'
        marginBottom: '0'

  - id: autoSelectTools
    label: Auto-select Tools
    type: toggle
    columnSpan: 1
    properties:
      style:
        marginTop: '6px'
        marginBottom: '0'

  # Row 2b — Finish ring
  - id: ringOnFinish
    label: Finish Ring
    type: toggle
    columnSpan: 1
    properties:
      style:
        marginTop: '6px'
        marginBottom: '0'

  # Row 3 — Chains controls
  - id: chainsEnabled
    label: Chains Enabled
    type: toggle
    columnSpan: 1
    on:
      - event: onVisible
        handler: chat.hasAgentChains
    properties:
      style:
        marginTop: '6px'
        marginBottom: '0'

  - id: allowedChains
    label: Allowed Chains
    type: multiSelect
    columnSpan: 2
    on:
      - event: onVisible
        handler: chat.hasAgentChains
    properties:
      placeholder: 'Select allowed chain targets (agent IDs)'
      style:
        width: '100%'

  # Section label
  - id: _label_tools
    type: label
    value: Tools
    columnSpan: 3
    properties:
      style:
        fontWeight: 600
        marginTop: '8px'
        marginBottom: '2px'

  # Row 4 — Tools selector full width
  - id: tool
    label: ''
    type: treeMultiSelect
    columnSpan: 3
    properties:
      separator: ':'
      searchable: false
      style:
        marginTop: '2px'
